<!DOCTYPE html>
<html>
<head>
    <title>Indonesian Subduction Zone Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        canvas {
            width: 100%;
            border: 1px solid #ccc;
            margin: 10px 0;
        }
        .info {
            margin: 10px 0;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
        }
        .legend {
            margin-top: 10px;
            padding: 10px;
            background: #fff3e0;
            border-radius: 5px;
        }
        .plate-labels {
            font-weight: bold;
            margin: 10px 0;
            color: #1976D2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Indonesian Subduction Zone</h1>
        <div class="plate-labels">
            Indo-Australian Plate â†’ Subducting beneath â†’ Eurasian Plate
        </div>
        <canvas id="simulationCanvas" height="400"></canvas>
        <div id="info" class="info">
            <h3>Sunda Arc Subduction Zone</h3>
            <p><strong>Process:</strong> The Indo-Australian Plate (brown/blue - continental/oceanic) moves northward and subducts beneath the Eurasian Plate (green)</p>
            <p><strong>Rate:</strong> ~7cm per year northward movement</p>
            <p><strong>Results:</strong> Formation of Indonesian volcanic arc, trenches, and frequent seismic activity</p>
        </div>
        <div class="legend">
            <strong>Legend:</strong>
            <div>ðŸŸ« Indo-Australian Continental Part</div>
            <div>ðŸ”µ Indo-Australian Oceanic Part</div>
            <div>ðŸŸ© Eurasian Plate</div>
            <div>â†’ Plate Movement Direction</div>
            <div>âš¡ Stress Build-up Points</div>
            <div>ðŸŒ‹ Active Volcanoes</div>
            <div>ðŸ”´ Earthquake Events</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');
        let time = 0;
        let stressPoints = [];
        let earthquakes = [];
        let volcanoes = [];

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = 400;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const colors = {
            water: '#B3E5FC',
            australianContinental: '#8D6E63',  // Brown for continental part
            australianOceanic: '#1E88E5',      // Darker blue for oceanic part
            eurasianPlate: '#66BB6A',          // Green for Eurasian plate
            force: '#FF9800',
            stress: '#FFD700'
        };

        class Volcano {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.active = false;
                this.timer = 0;
            }

            update() {
                if (Math.random() < 0.005) {
                    this.active = true;
                    this.timer = 50;
                }
                if (this.active) {
                    this.timer--;
                    if (this.timer <= 0) this.active = false;
                }
            }

            draw() {
                ctx.font = '20px Arial';
                ctx.fillStyle = this.active ? '#FF5722' : '#8D6E63';
                ctx.fillText('ðŸŒ‹', this.x, this.y);
            }
        }

        class Earthquake {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.radius = 0;
                this.maxRadius = 30;
                this.alpha = 1;
            }

            update() {
                this.radius += 1;
                this.alpha -= 0.02;
                return this.alpha > 0;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.strokeStyle = `rgba(255, 0, 0, ${this.alpha})`;
                ctx.stroke();
            }
        }

        function drawArrow(fromX, fromY, toX, toY, color) {
            const headLength = 15;
            const angle = Math.atan2(toY - fromY, toX - fromX);
            
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle - Math.PI / 6), 
                      toY - headLength * Math.sin(angle - Math.PI / 6));
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle + Math.PI / 6),
                      toY - headLength * Math.sin(angle + Math.PI / 6));
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawPlateLabels() {
            ctx.font = '14px Arial';
            ctx.fillStyle = '#000';
            ctx.fillText('Indo-Australian Plate', 50, canvas.height - 30);
            ctx.fillText('Eurasian Plate', canvas.width - 150, canvas.height - 30);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw water background
            ctx.fillStyle = colors.water;
            ctx.fillRect(0, 0, canvas.width, canvas.height/2);

            // Draw Indo-Australian Plate (with continental and oceanic parts)
            ctx.beginPath();
            ctx.moveTo(0, canvas.height/2);
            for(let x = 0; x < canvas.width/2; x++) {
                ctx.lineTo(x, canvas.height/2 + Math.sin(x * 0.02 + time) * 20);
            }
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.lineTo(0, canvas.height);
            ctx.closePath();

            // Create gradient for Indo-Australian Plate
            const gradient = ctx.createLinearGradient(0, 0, canvas.width/3, 0);
            gradient.addColorStop(0, colors.australianContinental);    // Continental part
            gradient.addColorStop(1, colors.australianOceanic);       // Oceanic part
            ctx.fillStyle = gradient;
            ctx.fill();

            // Draw Eurasian Plate
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, 0);
            ctx.lineTo(canvas.width, 0);
            ctx.lineTo(canvas.width, canvas.height);
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.lineTo(canvas.width/2 + 50, canvas.height/2);
            ctx.fillStyle = colors.eurasianPlate;
            ctx.fill();

            // Draw movement arrows
            drawArrow(canvas.width/4, canvas.height/2 + 50,
                     canvas.width/2, canvas.height/2 + 30, colors.force);

            // Add plate labels
            drawPlateLabels();

            // Generate stress points
            if (stressPoints.length < 4 && Math.random() < 0.02) {
                stressPoints.push({
                    x: canvas.width/2 + Math.random() * 100,
                    y: canvas.height/2 + Math.random() * 50,
                    energy: 0
                });
            }

            // Update stress points
            stressPoints = stressPoints.filter(point => {
                point.energy += 0.5;
                if (point.energy > 100) {
                    earthquakes.push(new Earthquake(point.x, point.y));
                    return false;
                }
                ctx.font = '20px Arial';
                ctx.fillStyle = colors.stress;
                ctx.fillText('âš¡', point.x, point.y);
                return true;
            });

            // Update earthquakes
            earthquakes = earthquakes.filter(quake => {
                const active = quake.update();
                if (active) quake.draw();
                return active;
            });

            // Update and draw volcanoes
            volcanoes.forEach(volcano => {
                volcano.update();
                volcano.draw();
            });

            time += 0.05;
            requestAnimationFrame(draw);
        }

        // Initialize volcanoes
        for (let i = 0; i < 5; i++) {
            volcanoes.push(new Volcano(
                canvas.width/2 + 50 + i * 40,
                canvas.height/2 - 20
            ));
        }

        // Start animation
        draw();
    </script>
</body>
</html>